functions:
   # Add a tool to search wikipedia
   wikipedia_search:
      _type: wiki_search
      max_results: 2

llms:
   # Tell NeMo Agent toolkit which LLM to use for the agent
   nim_llm:
      _type: nim
      model_name: meta/llama-3.1-70b-instruct
      temperature: 0.0

guardrails:
  output_rails:
    _type: nemo_guardrails
    enabled: true
    input_rails_enabled: false   # Focus on output guardrails only
    output_rails_enabled: true
    llm_name: nim_llm
    fallback_on_error: true
    rails:
      output:
         flows:
            - self check output    # Uses automatic default prompt

      # The default self_check_output prompt will check for:
      # - Messages should be helpful and informative
      # - Should not contain any harmful content
      # - Should not provide personal information
      # - Should not give instructions for illegal activities
      # - Should not contain biased or discriminatory language
      # - Should not make false claims or spread misinformation

workflow:
   # Use an agent that 'reasons' and 'acts'
   _type: react_agent
   # Give it access to our wikipedia search tool
   tool_names: [wikipedia_search]
   # Tell it which LLM to use
   llm_name: nim_llm
   # Make it verbose
   verbose: true
   # Retry parsing errors because LLMs are non-deterministic
   retry_parsing_errors: true
   # Retry up to 3 times
   max_retries: 3
   guardrails: output_rails
